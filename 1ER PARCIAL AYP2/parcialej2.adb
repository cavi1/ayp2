--vector de colas de registros con campo numérico y una cadena(cada componente es una cola)
--necesito que la longitud de la cadena se transforme en el campo numerico mediante un procedimiento
--la estructura debe quedar conservada
with Coladin, Ada.Text_Io, Ada.Integer_Text_Io, vecunipaqbas;
use Ada.Text_Io, Ada.Integer_Text_Io;

procedure Parcialej2 is
   
   Longmax:Positive:=20;
   vecmax:positive:=3;

subtype cade is string(1..longmax);   

   type Tregi is record
      Numero:Integer;
      Str:Cade;
      long:positive;
   end record;
      
   package Colaregi is new Coladin(Tregi);
   use Colaregi;
   
   subtype tindex is positive range 1..vecmax;

   procedure Putstr(X:in Tcola) is
   begin
      null;    
   end Putstr;
   

   procedure GETstr(X:out Tcola) is
   begin
      null;    
   end Getstr;
   
   

   package E is new Vecunipaqbas(Tcola, tindex, Putstr, Getstr);
   use E;
   
   --puedo vaciar la cola original, mientras voy chequeando voy pasando a la otra cola y cuando termine de chequear la cola temporal va a tener todo
   --al reves, despues lo vuelvo a meter hasta que se vacie la cola temporal
               




   procedure Llenocola(Cola:out Tcola) is
      Regi:Tregi;
      Cant:positive;     
   begin
      Put_line("ingrese la cantidad de elementos de la cola: ");
      Get(Cant);skip_line;
      for i in 1..cant loop
      Put_Line("ingrese la cadena: ");
      Get_Line(Regi.Str,regi.Long);skip_line;
      Put_Line("ingrese un numero: ");
      Get(Regi.Numero);Skip_Line;
      Insertar(Cola,Regi);   
      end loop;
      put("insercion en la cola finalizada...");  
   end Llenocola;
   
   procedure Llenovec(Vec:out Tarreglo) is
   cola: tcola;
   begin
      for I in 1..Vecmax loop
         crear(cola);
         Limpiar(Cola);
         Llenocola(Cola);
         vec(i):=cola;
      end loop;
   end Llenovec;
   
   procedure Imprimocolas(V:in out Tarreglo) is
      Regi:Tregi;
      colaux:tcola;
   begin
      for I in 1..Vecmax loop
         
         while not Vacia(V(I)) loop--saco muestro guardo en colaux
            Suprimir(V(I),Regi);
            put_line("str: ");
            put(regi.str(1..regi.long));new_line;            
            Put_line("nro: ");
            Put(Regi.Numero);New_Line;
            insertar(colaux,regi);
         end loop;
         
         while not Vacia(Colaux) loop --dejo todo como estaba
            Suprimir(Colaux,Regi);
            Insertar(v(i),Regi);
         end loop;
           
         
      end loop;
      
   end Imprimocolas;
   

   procedure Reemplazar (v: in out tarreglo) is
      Regi:Tregi;
      Colaux:Tcola;     
   begin
      
     for I in 1..Vecmax loop
         
      while not Vacia(v(i)) loop--saco cambio el nro por la long q corresponde inserto en colaux
         Suprimir(v(i), Regi);
         Regi.Numero:=Regi.Long;
         Insertar(Colaux,Regi);
      end loop;
      
      while not Vacia(Colaux) loop--acomodo todo para que quede con el orden original
         Suprimir(Colaux,Regi);
         Insertar(v(i),Regi);
      end loop;
         
      end loop;
          
      
   end Reemplazar;
   
       
vec:tarreglo;   
   
begin
   Llenovec(Vec);
   Imprimocolas(Vec);
   Reemplazar(Vec);
   imprimocolas(vec);
end Parcialej2;
        
   

   
